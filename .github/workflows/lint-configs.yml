name: Lint YAML and JSON

on:
  push:
    branches: [main, dev]
  pull_request:
    branches: [main, dev]

jobs:
  lint:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Install yamllint
        run: |
          pip install yamllint

      - name: Lint YAML files
        run: |
          yamllint -d relaxed .github/

      - name: Validate JSON files
        run: |
          find . -name "*.json" -type f ! -path "./node_modules/*" ! -path "./.venv/*" ! -path "./htmlcov/*" | while read file; do
            python -m json.tool "$file" > /dev/null && echo "✓ $file" || (echo "✗ $file"; exit 1)
          done
